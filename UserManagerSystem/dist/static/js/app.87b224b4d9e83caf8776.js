webpackJsonp([1],{"+eot":function(e,t){},"+lEu":function(e,t){},"+uUM":function(e,t){},0:function(e,t){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4Vh3":function(e,t){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},"4lrl":function(e,t){},5:function(e,t){},"5reh":function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return n}),a.d(t,"a",function(){return s}),a.d(t,"f",function(){return o}),a.d(t,"e",function(){return l});var r="login",i="loginData",n="logout",s="configData",o="uid",l="oid"},"5tk/":function(e,t){},6:function(e,t){},"6ZSt":function(e,t){e.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},7:function(e,t){},"7mbe":function(e,t){},8:function(e,t){},"8YCc":function(e,t){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},9:function(e,t){},FJNX:function(e,t){},J7E6:function(e,t){},KYqO:function(e,t){e.exports={_from:"elliptic@^6.5.3",_id:"elliptic@6.5.3",_inBundle:!1,_integrity:"sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7/VyHUYG91PRmPyeQDObKLPpeS4dw==",_location:"/elliptic",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"elliptic@^6.5.3",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.5.3",saveSpec:null,fetchSpec:"^6.5.3"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.5.3.tgz",_shasum:"cb59eb2efdaf73a0bd78ccd7015a62ad6e0f93d6",_spec:"elliptic@^6.5.3",_where:"/home/lq/ifb/egpalWeb/shoppingMall/UserManagerSystem/node_modules/browserify-sign",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},bundleDependencies:!1,dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},deprecated:!1,description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^3.0.8",grunt:"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.2",jscs:"^3.0.7",jshint:"^2.10.3",mocha:"^6.2.2"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.5.3"}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),i=a("/ocq"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view",{key:this.$route.fullPath})],1)],1)},staticRenderFns:[]};var s,o=a("VU/8")({name:"App"},n,!1,function(e){a("zYIo")},null,null).exports,l=a("bOdI"),c=a.n(l),d=a("NYxO"),u=a("5reh");r.default.use(d.a);var f=new d.a.Store({state:{token:null,userName:"",screenHeight:window.screen.height,imgUrl:window.imgUrl,baseUrl:window.origin.indexOf("localhost")>-1?"http://216.24.249.93:8080":"https://support.bk.cloudns.cc:8081"},mutations:(s={},c()(s,u.b,function(e,t){localStorage.token=t,e.token=t}),c()(s,u.c,function(e,t){localStorage.loginData=t,e.loginData=t}),c()(s,u.d,function(e){localStorage.removeItem("token"),localStorage.removeItem("loginData"),localStorage.removeItem("configData"),document.cookie="",e.token=null}),c()(s,u.a,function(e,t){localStorage.configData=t,e.configData=t}),c()(s,u.f,function(e,t){localStorage.uid=t,e.uid=t}),c()(s,u.e,function(e,t){localStorage.oid=t,e.oid=t}),s)}),m=(a("xJsL"),{name:"app",data:function(){return{onRoutes:"",menuTrees:[],backUpType:"",visible2:!1,isCollapse:!0,backUpList:["system","uploads","search"],userName:localStorage.getItem("userName")}},methods:{doLoginOut:function(){var e=this,t=this;this.$confirm("确认退出登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$post("/admin/v1/user/logout",{}).then(function(a){0==a.retCode?(e.$store.commit(u.d),e.$router.replace({path:"/",query:{redirect:e.$router.currentRoute.path}})):t.$message({type:"warning",message:a.message})}).catch(function(){e.$message({type:"info",message:"已取消"})})})},backUp:function(e){var t=this;t.$post("/admin/v1/backup?source="+e,{}).then(function(e){0==e.retCode?t.$message({type:"success",message:"备份成功"}):t.$message({type:"warning",message:e.message})}).catch(function(){})}},created:function(){this.menuTrees=JSON.parse(this.store.state.loginData),this.userInfo=JSON.parse(this.store.state.configData);var e=this.$route.fullPath.replace("Add","List");this.onRoutes=e},mounted:function(){}}),p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-container"},[a("el-container",[a("el-header",[a("el-row",{staticClass:"row-bg header",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"header-left"},[a("div",{staticClass:"header-left-cont"},[a("div",{staticClass:"header-left-cont-text",staticStyle:{"padding-left":"0"}},[a("h2",{staticStyle:{"line-height":"40px","font-size":"20px"}},[e._v("EShop后台管理系统")])])])]),e._v(" "),a("el-col",{staticClass:"header-right"},[a("div",{staticClass:"header-right-cont"},[a("el-dropdown",{attrs:{trigger:"hover"}},[a("span",{staticClass:"el-dropdown-link userinfo-inner"},[a("span",[e._v(e._s(e.userInfo.email))]),e._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.doLoginOut(t)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),e._v(" 退出登录\n\t\t\t\t\t\t\t\t\t")])],1)],1),e._v(" "),a("el-dropdown",[a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticStyle:{"background-color":"rgb(138, 129, 138) !important","border-color":"rgb(138, 129, 138) !important"},attrs:{type:"primary"}},[e._v("备份")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.backUpList,function(t){return a("el-dropdown-item",{key:t},[a("a",{key:t,staticStyle:{color:"#544c64","text-decoration":"none"},attrs:{download:"filename",href:e.store.state.baseUrl+"/admin/v1/backup?source="+t},on:{click:function(t){e.visible2=!1}}},[e._v(e._s(t))])])}),1)],1)],1)])],1)],1),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{width:"auto!important"}},[a("div",{staticStyle:{color:"#fff","padding-left":"20px"},on:{click:function(t){e.isCollapse=!e.isCollapse}}},[e._v(e._s(e.isCollapse?"展开":"收起")),a("i",{class:e.isCollapse?"el-submenu__icon-arrow el-icon-arrow-up":"el-submenu__icon-arrow el-icon-arrow-down",staticStyle:{position:"relative","margin-left":"30px"}})]),e._v(" "),a("el-menu",{ref:"menu",staticClass:"el-menu-vertical-demo",attrs:{collapse:e.isCollapse,router:!0,"default-active":e.onRoutes}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont icon-stack",staticStyle:{color:"#fff","margin-right":"10px"}}),e._v(" "),a("span",[e._v("Product")])]),e._v(" "),a("el-menu-item-group",e._l(e.menuTrees,function(t){return a("el-menu-item",{key:t.name,attrs:{index:"/template/List/"+t.name}},[e._v(e._s(t.name))])}),1)],2),e._v(" "),a("el-menu-item",{attrs:{index:"/Order/list"}},[a("i",{staticClass:"iconfont icon-dingdan",staticStyle:{color:"#fff","margin-right":"10px"}}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Order")])]),e._v(" "),a("el-menu-item",{key:"Coupon",attrs:{index:"/Coupon/list"}},[a("i",{staticClass:"iconfont icon-youhuiquan",staticStyle:{color:"#fff","margin-right":"10px"}}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Coupon")])]),e._v(" "),a("el-menu-item",{key:"Discount",attrs:{index:"/Discount/list"}},[a("i",{staticClass:"iconfont icon-zhekou",staticStyle:{color:"#fff","margin-right":"10px"}}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Discount")])]),e._v(" "),a("el-submenu",{attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont icon-xitong",staticStyle:{color:"#fff","margin-right":"10px"}}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Systems")])]),e._v(" "),a("el-menu-item-group",[a("el-menu-item",{key:"Photo",attrs:{index:"/photo/list"}},[e._v("Photo")]),e._v(" "),a("el-menu-item",{key:"Config",attrs:{index:"/config"}},[e._v("Config")]),e._v(" "),a("el-menu-item",{key:"User",attrs:{index:"/user/list"}},[e._v("User")])],1)],2)],1)],1),e._v(" "),a("el-main",[a("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,p,!1,function(e){a("vLcX")},null,null).exports,g=a("mvHQ"),b=a.n(g),v={name:"User",data:function(){return{keyword:"",tableData:[]}},methods:{search:function(){var e=this;this.$post("/admin/v1/user/search?q="+this.keyword,{}).then(function(t){0==t.retCode?(e.tableData=t.data||[],e.tableData&&e.tableData.map(function(e){e.admin=e.Perm.admin+""}),e.$forceUpdate()):e.$message({type:"warning",message:t.message})})},handleEdit:function(e){localStorage.setItem("userData",b()(e)),this.$router.push("/User/Modify")},handleDelete:function(e){var t=this;this.$delete("/admin/v1/user/remove",{email:e.email}).then(function(e){0==e.retCode?(t.$message({message:"删除成功!",type:"success"}),window.location.reload()):t.$message({message:e.msg,type:"warning"})})}},created:function(){},mounted:function(){},actived:function(){this.resetDatas()}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"common-btn",attrs:{type:"primary"},nativeOn:{click:function(t){return e.$router.push("/User/Add")}}},[e._v("Add")]),e._v(" "),a("el-button",{staticClass:"common-btn",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.search}},[e._v("Search")]),e._v(" "),a("el-input",{staticClass:"search-input",staticStyle:{width:"340px!important","margin-right":"50px",float:"right"},attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,width:"100%"}},[a("el-table-column",{attrs:{"header-align":"left",prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"email",label:"email"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"admin",label:"admin"}}),e._v(" "),a("el-table-column",{attrs:{label:"operation",width:"240px","cell-class-name":"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("Delete")])]}}])})],1)],1)},staticRenderFns:[]};var _=a("VU/8")(v,y,!1,function(e){a("+uUM")},null,null).exports,S={name:"List",data:function(){return{type:"name",keyword:"",tableData:[],selectid:null,pageNum:1,pageSize:10,total:0,notSearch:!0}},methods:{handleEdit:function(e){localStorage.setItem("keyword",this.keyword),this.$router.push("/Coupon/Add?id="+e.id)},getRowStyle:function(e){var t=e.row;e.rowIndex;return t.isLate},handleStatus:function(e){var t=this,a="";a="true"==e.online?"/admin/v1/content/reject":"/admin/v1/content/approve",this.$post(a+"?type=Coupon&id="+e.id,{}).then(function(e){0==e.retCode?(t.$message({message:"操作成功!",type:"success"}),t.queryTable()):t.$message({message:e.msg,type:"warning"})})},handleDelete:function(e){var t=this;this.$delete("/admin/v1/content?type=Coupon&id="+e.id,{}).then(function(e){0==e.retCode?(t.$message({message:"删除成功!",type:"success"}),t.queryTable()):t.$message({message:e.msg,type:"warning"})})},selfSearch:function(){var e=this;if(!this.keyword)return this.pageNum=1,void this.queryTable();this.notSearch=!1,this.tableData=JSON.parse(b()(this.tableData1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),console.log(this.tableData),this.originTable=JSON.parse(b()(this.originTable1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),this.$forceUpdate()},copy:function(e){var t=this,a=this.originTable.filter(function(t,a){return t.id==e});(a=a[0]).name=a.name+"(复制)",delete a.id,t.$post("/admin/v1/content?type=Coupon",a).then(function(e){0==e.retCode?(t.$message({type:"success",message:"Copy success"}),t.search()):t.$message({type:"warning",message:e.message})})},queryTable:function(){var e=this;this.$get("/admin/v1/contents?type=Coupon&offset="+this.pageNum+"&count="+this.pageSize,{}).then(function(t){0==t.retCode?(e.notSearch=!0,e.tableData=t.data||[],e.originTable=JSON.parse(b()(e.tableData)),e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss"),t.game=t.game.split(",")[1],t.type=1==t.type?"百分比":"金额";var a=t.endtime+":00:00";(new Date).getTime()>new Date(a).getTime()&&(t.isLate="late")}),e.tableData1=JSON.parse(b()(e.tableData)),e.total=t.meta.total?parseInt(t.meta.total):0,e.keyword&&e.selfSearch()):e.$message({type:"warning",message:t.message})})},search:function(){var e=this;if(!this.keyword)return this.pageNum=1,void this.queryTable();this.notSearch=!1,this.$get("/admin/v1/contents/search?type=Coupon&q="+this.keyword+"&status=public",{}).then(function(t){0==t.retCode?(e.tableData=t.data||[],e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss"),t.game=t.game.split(",")[1],t.type=1==t.type?"百分比":"金额";var a=t.ednTime+":00:00";(new Date).getTime()>new Date(a).getTime()&&(t.isLate="late")}),e.tableData1=JSON.parse(b()(e.tableData)),e.total=t.meta.total?parseInt(t.meta.total):0,e.$forceUpdate()):e.$message({type:"warning",message:t.message})})},handleCurrentChange:function(){this.queryTable()},handleSizeChange:function(e){this.pageSize=e,this.queryTable()}},created:function(){localStorage.getItem("keyword")&&(this.keyword=localStorage.getItem("keyword"),localStorage.setItem("keyword","")),this.queryTable()},mounted:function(){}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"common-btn",attrs:{type:"primary"},nativeOn:{click:function(t){return e.$router.push("/Coupon/Add")}}},[e._v("Add")]),e._v(" "),a("el-button",{staticClass:"common-btn",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.search}},[e._v("Search")]),e._v(" "),a("el-input",{staticClass:"search-input",staticStyle:{width:"340px!important","margin-right":"50px",float:"right"},attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},on:{input:e.selfSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("el-table",{attrs:{data:e.tableData,width:"100%","row-class-name":e.getRowStyle}},[a("el-table-column",{attrs:{"header-align":"left",width:"70px",sortable:"",prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"140px",prop:"name",label:"name"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"160px",sortable:"",prop:"game",label:"game"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"price",label:"price"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"180px",prop:"initial_amount",label:"initial_amount"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"type",label:"type"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",sortable:"",prop:"code",width:"160px",label:"code"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"meta",width:"160px",label:"meta"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",sortable:"",prop:"starttime",width:"160px",label:"starttime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t"+e._s(t.row.starttime)+"时\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",sortable:"",prop:"endtime",width:"160px",label:"endtime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t"+e._s(t.row.endtime)+"时\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"updated",width:"160px",label:"updateTime"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"operation",width:"180px","cell-class-name":"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("Delete")]),e._v(" "),a("el-button",{staticClass:"clip",attrs:{type:"text",size:"small"},on:{click:function(a){return e.copy(t.row.id)}}},[e._v("Copy")])]}}])})],1),e._v(" "),e.notSearch?a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1)],1)},staticRenderFns:[]};var x=a("VU/8")(S,w,!1,function(e){a("FJNX")},null,null).exports,k=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"^[a-zA-Z0-9.-_一-龥]+@[a-zA-Z0-9-_]+(\\.[A-Za-z0-9-_]+)+$"},D=a("sYY+"),$=a.n(D),C={name:"Add",data:function(){var e=function(e,t,a){if(t){if((t+="").split(".")[1]&&t.split(".")[1].length>3)return void a(new Error("最多只能输入3位小数"));a()}else a(new Error(e.field+"不能为空"))};return{form:{online:!1,type:1},gameList:[],list:{},activeKey:"",rules:{name:[{message:"请填写name",required:!0,trigger:"blur"}],game:[{message:"请填写game",required:!0,trigger:"blur"}],price:[{required:!0,trigger:"blur",validator:e}],initial_amount:[{validator:e,required:!0,trigger:"blur"}],rangeTime:[{message:"请填写rangeTime",required:!0,trigger:"blur"}],code:[{message:"请填写code",required:!0,trigger:"blur"}]}}},methods:{creatEdit:function(){var e=this,t=this;setTimeout(function(){e.editor=new $.a(e.$refs.editorElem),e.editor.customConfig.onchange=function(e){t.form.desc=e,t.$forceUpdate()},e.editor.create(),e.editor.txt.html(t.form.desc),e.editor1=new $.a(e.$refs.editorElem1),e.editor1.customConfig.onchange=function(e){t.form.meta=e,t.$forceUpdate()},e.editor1.create(),e.editor1.txt.html(t.form.meta)},1e3)},refreshData:function(e){console.log(e),this.$forceUpdate()},getDataSource:function(e,t){var a=this,r=this;r.$get("/admin/v1/contents?type=Game",{}).then(function(e){0==e.retCode?(a.gameList=e.data||[],0==a.gameList.length&&a.$alert("请先创建Game","提示",{confirmButtonText:"确定",callback:function(e){a.$router.push("/template/Add/Game")}}),a.$route.query.id&&a.$get("/admin/v1/content?type=Coupon&id="+a.$route.query.id,{}).then(function(e){0==e.retCode?(a.form=e.data,a.form.rangeTime=[e.data.starttime,e.data.endtime],a.form.game=parseInt(a.form.game.split(",")[0]),a.form.type=parseInt(a.form.type),a.form.currency="$",a.$forceUpdate()):a.$message({message:e.msg,type:"warning"})}),a.$forceUpdate()):r.$message({type:"warning",message:e.message})})},submit:function(){var e=this,t={};t=JSON.parse(b()(this.form));var a=this,r=this.gameList.filter(function(t,a){return t.id==e.form.game});t.game=this.form.game+","+r[0].name,t.starttime=t.rangeTime[0],t.endtime=t.rangeTime[1],t.entime=t.rangeTime[1],this.$refs.form.validate(function(r){r?e.$route.query.id?a.$post("/admin/v1/content/update?type=Coupon&id="+e.$route.query.id,t).then(function(e){0==e.retCode?a.$util.successAlert("Modify Success！","/Coupon/list","return list"):a.$message({type:"warning",message:e.message})}):a.$post("/admin/v1/content?type=Coupon",t).then(function(e){0==e.retCode?a.$util.successAlert("Add Success！","/Coupon/list","return list"):a.$message({type:"warning",message:e.message})}):a.$message.error("请填写 the form correctly！")})}},created:function(){this.creatEdit(),this.getDataSource()}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-card",{staticClass:"box-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/Coupon/List"}}},[e._v("Coupon")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.$route.query.id?"Edit":"Add"))])],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"align-center",staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"20%","label-position":"right"}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 name",maxlength:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"game",prop:"game"}},[a("el-select",{staticStyle:{width:"800px"},attrs:{clearable:!0,placeholder:"请选择 game"},on:{change:e.refreshData},model:{value:e.form.game,callback:function(t){e.$set(e.form,"game",t)},expression:"form.game"}},e._l(e.gameList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"currency",prop:"currency"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{disabled:"",placeholder:"请填写 currency",maxlength:""},model:{value:e.form.currency,callback:function(t){e.$set(e.form,"currency",t)},expression:"form.currency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"price",prop:"price"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 price",maxlength:"",oninput:"value=value.replace(/[^\\d.]/g,'')"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"type",prop:"type"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:1}},[e._v("百分比")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("金额")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"initial_amount",prop:"initial_amount"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 initial_amount",maxlength:"",oninput:"value=value.replace(/[^\\d.]/g,'')"},model:{value:e.form.initial_amount,callback:function(t){e.$set(e.form,"initial_amount",t)},expression:"form.initial_amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"rangeTime",prop:"rangeTime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH","value-format":"yyyy-MM-dd HH",type:"datetimerange","range-separator":"To","start-placeholder":"startTime","end-placeholder":"endTime"},model:{value:e.form.rangeTime,callback:function(t){e.$set(e.form,"rangeTime",t)},expression:"form.rangeTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"code",prop:"code"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 code",maxlength:""},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"desc",prop:"desc"}},[a("div",{ref:"editorElem",staticStyle:{"z-index":"1000"}},[a("div",{staticStyle:{"text-align":"left"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})])]),e._v(" "),a("el-form-item",{attrs:{label:"meta",prop:"meta"}},[a("div",{ref:"editorElem1",staticStyle:{"z-index":"1000"}},[a("div",{staticStyle:{"text-align":"left"},model:{value:e.form.meta,callback:function(t){e.$set(e.form,"meta",t)},expression:"form.meta"}})])]),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"return-btn"},[a("el-button",{staticClass:"button-purple",attrs:{type:"info"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("confirm")]),e._v(" "),a("el-button",{staticClass:"button-gray",attrs:{type:"info"},nativeOn:{click:function(t){return e.$util.goBack(t)}}},[e._v("cancel")])],1)],1)],1)]),e._v("\n\t"+e._s(e.form)+"\n")],1)},staticRenderFns:[]};var A=a("VU/8")(C,T,!1,function(e){a("+lEu")},"data-v-048afe3e",null).exports,O={name:"List",data:function(){return{type:"name",keyword:"",tableData:[],selectid:null,pageNum:1,pageSize:20,total:0,drawer:!1,drawer1:!1,statusList:[],badList:[{name:"true",value:!0},{name:"false",value:!1}],notSearch:!0,inputValue:"",inputVisible:[],checkAll:!0,isIndeterminate:!1,checkedStatus:[],statusOptions:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},timeRange:[]}},methods:{handleEdit:function(e){localStorage.setItem("selectData",b()(e));var t=window.location.origin+"/#/Order/add?id="+e.id;window.showModelessDialog?showModelessDialog(t,window,"dialogWidth:880px; dialogHeight:900px"):window.open(t,"newwindow"+e.id,"height=900, width=880, top=0, left="+5*e.id+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")},getRowStyle:function(e){var t=e.row;e.rowIndex;return t.bad?"bad":t.note&&t.note.length>0?"note":t.comments&&t.comments.length>0?"comments":""},selfSearch:function(){var e=this;if(!this.keyword&&!this.isIndeterminate&&0==this.timeRange.length)return this.pageNum=1,void this.queryTable();this.notSearch=!1,this.tableData=JSON.parse(b()(this.tableData1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),console.log(this.tableData),this.originTable=JSON.parse(b()(this.originTable1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),this.$forceUpdate()},handleClose:function(e,t){this.tableData[e].note.splice(t,1),this.edit(e,this.tableData[e].id)},exportTable:function(){var e=this.originTable,t={};try{for(var a in e[0])t[a]=a}catch(e){return void this.$message.error("请填写tableLable表头属性")}if(0!=this.originTable.length){var r=JSON.parse(b()(this.originTable));r.unshift(t);for(var i="",n=0;n<r.length;n++){for(var s in t)r[n][s]=r[n][s]+"",r[n][s]=r[n][s].replace(/\n/g," "),r[n][s]=r[n][s].replace(/,/g,"，"),i+=r[n][s]+"\t,";i+="\n"}var o="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(i),l=document.createElement("a");l.href=o,l.download="订单数据.csv",document.body.appendChild(l),l.click(),document.body.removeChild(l)}else this.$message.error("请填写tableData表格数据属性")},dateFormat:function(e,t){(e=new Date(e)).setHours(e.getHours()-14);var a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t},getFromData:function(e){var t=JSON.parse(b()(this.originTable[e])),a="",r="";return JSON.parse(t.description).map(function(e,i){var n=e.category?e.category+"-":"",s=e.server?e.server+"-":"";a=n+s+e.product+"*"+e.quantity;var o={pay_time:'"'+t.pay_time+'"',game:'"'+e.game+'"',products:'"'+a+'"',gameId:'"'+JSON.parse(t.description)[0].game+'"',payer_email:'"'+t.payer+'"',order:'"'+t.order_id+'"',currency:'",,'+t.currency+'"',total:'"'+t.total+'"'};for(var l in o)o[l]=o[l],r+=o[l]+"\t";r+="\n"}),console.log(r),r},handleCheckAllChange:function(e){this.checkedStatus=e?this.statusOptions:[],this.isIndeterminate=!1,this.pageNum=1,this.queryTable()},handlecheckedStatusChange:function(e){var t=e.length;this.checkAll=t===this.statusOptions.length,this.isIndeterminate=t>0&&t<this.statusOptions.length,this.search()},showInput:function(e){var t=this;this.inputVisible.splice(e,1,1),this.tableData[e].note=this.tableData[e].note||[],this.$nextTick(function(){t.$refs.saveTagInput.$refs.input.focus()})},handleInputBlur:function(e){this.inputVisible.splice(e,1,0),this.tableData[e].note.splice(e,0),this.$forceUpdate()},handleInputConfirm:function(e){var t=this.inputValue,a=new Date,r="";r+=a.getFullYear()+"-",r+=a.getMonth()+1+"-",r+=a.getDate()+" ",r+=a.getHours()+":",r+=a.getMinutes()+":",r+=a.getSeconds()+"";var i=JSON.parse(this.store.state.configData).admin_email;t&&(this.tableData[e].note.push(" ["+r+"] ["+i+"]:"+t),this.edit(e,this.tableData[e].id)),this.inputVisible[e]=0,this.inputValue="",this.$forceUpdate()},handleStatus:function(e){var t=this,a="";a="true"==e.online?"/admin/v1/content/reject":"/admin/v1/content/approve",this.$post(a+"?type=Order&id="+e.id,{}).then(function(e){0==e.retCode?(t.$message({message:"success!",type:"success"}),t.queryTable()):t.$message({message:e.msg,type:"warning"})})},edit:function(e,t){var a,r=this;a=this.originTable[e],this.originTable[e].note=this.tableData[e].note&&this.tableData[e].note.join(","),this.originTable[e].status=this.tableData[e].status,this.originTable[e].bad=this.tableData[e].bad,delete a.id,r.$post("/admin/v1/content/update?type=Order&id="+t,a).then(function(e){0==e.retCode?(r.$message({type:"success",message:"success"}),r.search()):r.$message({type:"warning",message:e.message})})},copy:function(e){var t=this,a=new this.clipboard(".clip");a.on("success",function(e){t.$message({message:"copy success!",type:"success"}),a.destroy()}),a.on("error",function(e){console.log("该浏览器不支持自动复制"),clipboard.destroy()})},queryTable:function(){var e=this;this.$get("/admin/v1/contents?type=Order&offset="+this.pageNum+"&count="+this.pageSize,{}).then(function(t){0==t.retCode?(e.notSearch=!0,e.tableData=t.data||[],e.originTable=JSON.parse(b()(e.tableData)),e.originTable1=JSON.parse(b()(e.tableData)),e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss"),t.note=t.note&&t.note.split(","),t.total=parseFloat(t.total),t.request_time=t.request_time?e.dateFormat(t.request_time,"yyyy-MM-dd HH:mm:ss"):""}),e.tableData1=JSON.parse(b()(e.tableData)),e.total=t.meta.total?parseInt(t.meta.total):0,e.keyword&&e.selfSearch()):e.$message({type:"warning",message:t.message})})},getDataSource:function(){var e=this,t=this;t.$get("/admin/v1/contents?type=Orderstatus",{}).then(function(a){0==a.retCode?(e.statusList=a.data||[],e.statusList.map(function(t){e.statusOptions.push(t.name)}),e.$forceUpdate()):t.$message({type:"warning",message:a.message})})},search:function(){var e=this;if(!this.keyword&&!this.isIndeterminate&&0==this.timeRange.length)return this.pageNum=1,void this.queryTable();if(this.isIndeterminate){var t="";this.checkedStatus.map(function(a,r){t=r!=e.checkedStatus.length-1?t+'("'+a+'")|':t+'("'+a+'")'})}else t="";var a="",r="";this.timeRange.length>0&&(a=this.timeRange[0].getTime(),r=this.timeRange[1].getTime()),this.notSearch=!1,this.$get("/admin/v1/contents/search?type=Order&q="+this.keyword+"&r="+t+"&status=public&start="+a+"&end="+r,{}).then(function(t){0==t.retCode?(e.tableData=t.data||[],e.originTable=JSON.parse(b()(e.tableData)),e.originTable1=JSON.parse(b()(e.tableData)),e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss"),t.note=t.note&&t.note.split(","),t.request_time=t.request_time?e.dateFormat(t.request_time,"yyyy-MM-dd HH:mm:ss"):""}),e.total=t.meta.total?parseInt(t.meta.total):0,e.tableData1=JSON.parse(b()(e.tableData)),e.keyword&&e.selfSearch(),e.$forceUpdate()):e.$message({type:"warning",message:t.message})})},handleCurrentChange:function(){this.queryTable()},handleSizeChange:function(e){this.pageSize=e,this.queryTable()}},created:function(){var e=this;if(localStorage.getItem("keyword")&&(this.keyword=localStorage.getItem("keyword"),localStorage.setItem("keyword","")),this.getDataSource(),localStorage.getItem("checkedStatus")||localStorage.getItem("timeRange"))return this.checkedStatus=localStorage.getItem("checkedStatus")?JSON.parse(localStorage.getItem("checkedStatus")):[],this.timeRange=localStorage.getItem("timeRange")?localStorage.getItem("timeRange").split(","):[],this.timeRange[0]=new Date(parseInt(this.timeRange[0])),this.timeRange[1]=new Date(parseInt(this.timeRange[1])),localStorage.setItem("checkedStatus",""),localStorage.setItem("timeRange",""),void setTimeout(function(){e.handlecheckedStatusChange(e.checkedStatus)},1e3);this.queryTable()},mounted:function(){}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("el-card",{staticClass:"box-card",staticStyle:{"text-align":"right"}},[a("el-input",{staticClass:"search-input",staticStyle:{width:"340px!important","margin-right":"50px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},on:{input:e.selfSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{staticClass:"common-btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("Search")]),e._v(" "),a("el-button",{staticClass:"common-btn",staticStyle:{float:"right","background-color":"#8a818a!important","border-color":"#8a818a!important"},attrs:{type:"primary"},on:{click:e.exportTable}},[e._v("Export")])],1),e._v(" "),a("el-card",[a("el-row",[a("el-col",{staticStyle:{display:"flex"},attrs:{span:12}},[a("label",{staticStyle:{width:"140px"}},[e._v("订单状态：")]),e._v(" "),a("el-checkbox-group",{staticStyle:{display:"inline-block"},on:{change:e.handlecheckedStatusChange},model:{value:e.checkedStatus,callback:function(t){e.checkedStatus=t},expression:"checkedStatus"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),e._l(e.statusList,function(t){return a("el-checkbox",{key:t.name,staticStyle:{"margin-bottom":"10px"},attrs:{label:t.name}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("label",[e._v("时间筛选：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},on:{change:e.search},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1)],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("el-table",{attrs:{data:e.tableData,width:"100%","row-class-name":e.getRowStyle}},[a("el-table-column",{attrs:{"header-align":"left",width:"240px",sortable:"",prop:"pay_time",label:"pay_time"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"160px",prop:"order_id",label:"order_id"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"300px",label:"Products"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(JSON.parse(t.row.description),function(t,r){return 0===r?a("div",{key:r},[e._v("\n\t\t\t\t\t"+e._s(t.game)+" ")]):e._e()})}}])}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"160px",prop:"comments",label:"request_info"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"160px",label:"payer_email"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.payer?a("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.payer))])],1),e._v(" "),a("div",{staticClass:"tool-tip"},[e._v("note")]),e._v(" "),e._l(t.row.note,function(r,i){return a("el-tag",{key:i,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t.$index,i)}}},[e._v("\n\t\t\t\t\t\t"+e._s(r)+" ")])}),e._v(" "),1==e.inputVisible[t.$index]?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.handleInputBlur(t.$index)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.$index)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t.$index)}}},[e._v("+Note")])],2):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"240px",sortable:"",prop:"ip",label:"ip"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",width:"120px",sortable:"",prop:"vendor",label:"pay_type"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"status",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100px"},attrs:{clearable:!0,placeholder:"请选择 status"},on:{change:function(a){return e.edit(t.$index,t.row.id)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row['status']"}},e._l(e.statusList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",sortable:"",label:"total"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.total)+e._s(t.row.currency)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bad",label:"bad",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100px"},attrs:{clearable:!0,placeholder:"请选择 status"},on:{change:function(a){return e.edit(t.$index,t.row.id)}},model:{value:t.row.bad,callback:function(a){e.$set(t.row,"bad",a)},expression:"scope.row['bad']"}},e._l(e.badList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"operation",width:"120px","cell-class-name":"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("view")]),e._v(" "),a("el-button",{staticClass:"clip",attrs:{type:"text","data-clipboard-text":e.getFromData(t.$index),size:"small"},on:{click:function(a){return e.copy(t.row.id)}}},[e._v("Copy")])]}}])})],1),e._v(" "),e.notSearch?a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1)],1)},staticRenderFns:[]};var E=a("VU/8")(O,q,!1,function(e){a("5tk/")},null,null).exports,N={name:"Add",data:function(){return{rules:{email:[{message:"请填写email",required:!0,trigger:"blur"},{message:"请输入正确的email",pattern:k(0,40),trigger:"blur"}],password:[{message:"请填写password",required:!0,trigger:"blur"}]},form:{}}},methods:{submit:function(){var e=this,t=this;this.$refs.form.validate(function(a){a?t.$post("/admin/v1/user/register",e.form).then(function(e){0==e.retCode?t.$util.successAlert("Add Success！","/User/list","return list"):t.$message({type:"warning",message:e.message})}):t.$message.error("请正确填写表单！")})}},created:function(){}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-card",{staticClass:"box-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/User/List"}}},[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("新增用户")])],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"align-center",staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"35%","label-position":"right"}},[a("el-form-item",{attrs:{label:"email：",prop:"email"}},[a("el-input",{attrs:{placeholder:"请填写 email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"password：",prop:"password"}},[a("el-input",{attrs:{placeholder:"请填写 password",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"return-btn"},[a("el-button",{staticClass:"button-purple",attrs:{type:"info"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"button-gray",attrs:{type:"info"},nativeOn:{click:function(t){return e.$util.goBack(t)}}},[e._v("取 消")])],1)],1)],1)])],1)},staticRenderFns:[]};var U=a("VU/8")(N,I,!1,function(e){a("iMgA")},null,null).exports,M={name:"Add",data:function(){return{rules:{email:[{message:"请填写email",required:!0,trigger:"blur"},{message:"请输入正确的email",pattern:k(0,40),trigger:"blur"}],password:[{message:"请填写password",required:!0,trigger:"blur"}],new_password:[{message:"请填写new password",required:!0,trigger:"blur"}]},form:{}}},methods:{submit:function(){var e=this,t=this;this.$refs.form.validate(function(a){a?t.$post("/admin/v1/user/update",e.form).then(function(e){0==e.retCode?t.$util.successAlert("Modify Success！","/User/list","return list"):t.$message({type:"warning",message:e.message})}):t.$message.error("请正确填写表单！")})}},created:function(){this.form.email=JSON.parse(localStorage.getItem("userData")).email}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-card",{staticClass:"box-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/User/List"}}},[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("修改用户")])],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"align-center",staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"35%","label-position":"right"}},[a("el-form-item",{attrs:{label:"email：",prop:"email"}},[a("el-input",{attrs:{disabled:"",placeholder:"请填写email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"old password：",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请填写 old password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"new password：",prop:"new_password"}},[a("el-input",{attrs:{type:"password",placeholder:"请填写 new password"},model:{value:e.form.new_password,callback:function(t){e.$set(e.form,"new_password",t)},expression:"form.new_password"}})],1),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"return-btn"},[a("el-button",{staticClass:"button-purple",attrs:{type:"info"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"button-gray",attrs:{type:"info"},nativeOn:{click:function(t){return e.$util.goBack(t)}}},[e._v("取 消")])],1)],1)],1)])],1)},staticRenderFns:[]};var z=a("VU/8")(M,R,!1,function(e){a("Ur4z")},null,null).exports,L={name:"List",data:function(){return{type:"name",keyword:"",tableData:[],selectid:null,pageNum:1,pageSize:10,total:0,notSearch:!0}},methods:{checkSeleted:function(){return!!this.selectid||(this.$message({message:"请先选择用户!",type:"warning"}),!1)},handleEdit:function(e){localStorage.setItem("keyword",this.keyword),this.$router.push("/Discount/Add?id="+e.id)},handleStatus:function(e){var t=this,a="";a="true"==e.online?"/admin/v1/content/reject":"/admin/v1/content/approve",this.$post(a+"?type=Discount&id="+e.id,{}).then(function(e){0==e.retCode?(t.$message({message:"操作成功!",type:"success"}),t.queryTable()):t.$message({message:e.msg,type:"warning"})})},handleDelete:function(e){var t=this;this.$delete("/admin/v1/content?type=Discount&id="+e.id,{}).then(function(e){0==e.retCode?(t.$message({message:"删除成功!",type:"success"}),t.queryTable()):t.$message({message:e.msg,type:"warning"})})},selfSearch:function(){var e=this;if(!this.keyword)return this.pageNum=1,void this.queryTable();this.notSearch=!1,this.tableData=JSON.parse(b()(this.tableData1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),console.log(this.tableData),this.originTable=JSON.parse(b()(this.originTable1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),this.$forceUpdate()},copy:function(e){var t=this,a=this.originTable.filter(function(t,a){return t.id==e});(a=a[0]).name=a.name+"(复制)",delete a.id,t.$post("/admin/v1/content?type=Discount",a).then(function(e){0==e.retCode?(t.$message({type:"success",message:"Copy success"}),t.search()):t.$message({type:"warning",message:e.message})})},queryTable:function(){var e=this;this.$get("/admin/v1/contents?type=Discount&offset="+this.pageNum+"&count="+this.pageSize,{}).then(function(t){0==t.retCode?(e.notSearch=!0,e.tableData=t.data||[],e.originTable=JSON.parse(b()(e.tableData)),e.originTable1=JSON.parse(b()(e.tableData)),e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){t.online=t.online+"",t.list=JSON.parse(t.list),t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss")}),e.tableData1=JSON.parse(b()(e.tableData)),e.total=t.meta.total?parseInt(t.meta.total):0,e.keyword&&e.selfSearch()):e.$message({type:"warning",message:t.message})})},search:function(){var e=this;if(!this.keyword)return this.pageNum=1,void this.queryTable();this.notSearch=!1,this.$get("/admin/v1/contents/search?type=Discount&q="+this.keyword+"&status=public",{}).then(function(t){0==t.retCode?(e.tableData=t.data||[],e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){t.online=t.online+"",t.list=JSON.parse(t.list),t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss")}),e.tableData1=JSON.parse(b()(e.tableData)),e.total=t.meta.total?parseInt(t.meta.total):0,e.$forceUpdate()):e.$message({type:"warning",message:t.message})})},handleCurrentChange:function(){this.queryTable()},handleSizeChange:function(e){this.pageSize=e,this.queryTable()}},created:function(){localStorage.getItem("keyword")&&(this.keyword=localStorage.getItem("keyword"),localStorage.setItem("keyword","")),this.queryTable()},mounted:function(){}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"common-btn",attrs:{type:"primary"},nativeOn:{click:function(t){return e.$router.push("/Discount/Add")}}},[e._v("Add")]),e._v(" "),a("el-button",{staticClass:"common-btn",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.search}},[e._v("Search")]),e._v(" "),a("el-input",{staticClass:"search-input",staticStyle:{width:"340px!important","margin-right":"50px",float:"right"},attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},on:{input:e.selfSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("el-table",{attrs:{data:e.tableData,width:"100%"}},[a("el-table-column",{attrs:{"header-align":"left",width:"70px",prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{width:"140px","header-align":"left",prop:"name",label:"name"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"online",label:"online",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"starttime",width:"160px",label:"starttime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t"+e._s(t.row.starttime)+"时\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"endtime",width:"160px",label:"endtime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t"+e._s(t.row.endtime)+"时\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"list",width:"500px","cell-class-name":"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{data:t.row.list}},[a("el-table-column",{attrs:{"cell-style":"text-align:center","header-align":"center",label:"level",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.level)+"\n\t\t\t\t\t\t\t")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"cell-style":"text-align:center","header-align":"center",label:"qty",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.qty)+"\n\t\t\t\t\t\t\t")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"cell-style":"text-align:center","header-align":"center",label:"discount",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.discount)+"\n\t\t\t\t\t\t\t")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"cell-style":"text-align:center","header-align":"center",label:"selltext",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.selltext)+"\n\t\t\t\t\t\t\t")]}}],null,!0)})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"updated",width:"160px",label:"updateTime"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"operation",width:"180px","cell-class-name":"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("Delete")]),e._v(" "),a("el-button",{staticClass:"clip",attrs:{type:"text",size:"small"},on:{click:function(a){return e.copy(t.row.id)}}},[e._v("Copy")])]}}])})],1),e._v(" "),e.notSearch?a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1)],1)},staticRenderFns:[]};var J=a("VU/8")(L,H,!1,function(e){a("7mbe")},null,null).exports,F={name:"Add",data:function(){var e=this;return{form:{discountList:[{level:1,qty:"",discount:""}],online:!1},list:{},tableRules:{level:[{required:!0,message:"level不能为空",trigger:"blur"}],qty:[{validator:function(t,a,r){if(""===a)r(new Error("qty不能为空"));else{var i=1*t.field.split(".")[1];if(e.form.discountList[i-1]&&1*e.form.discountList[i-1].qty>1*a)return void r(new Error("qty不能小于前一条数据的qty"));if(e.form.discountList[i+1]&&1*e.form.discountList[i+1].qty<1*a)return void r(new Error("qty不能大于后一条数据的qty"));r()}},trigger:"blur"}],discount:[{required:!0,message:"discount不能为空",trigger:"blur"}]},activeKey:"",rules:{name:[{message:"请填写name",required:!0,trigger:"blur"}],rangeTime:[{message:"请填写rangeTime",required:!0,trigger:"blur"}]}}},methods:{handleAdd:function(e){var t=this;this.$refs.form.validate(function(a){if(!a)return!1;t.form.discountList.splice(e+1,0,{qty:"",discount:""}),t.$forceUpdate()})},creatEdit:function(){var e=this,t=this;setTimeout(function(){e.editor=new $.a(e.$refs.editorElem),e.editor.customConfig.onchange=function(e){t.form.desc=e,t.$forceUpdate()},e.editor.create(),e.editor.txt.html(t.form.desc)},1e3)},handleDelete:function(e){this.form.discountList.splice(e,1),this.$forceUpdate()},submit:function(){var e=this,t={},a=this;(t=JSON.parse(b()(this.form))).starttime=t.rangeTime[0],t.endtime=t.rangeTime[1],t.discountList.map(function(e,t){e.level=t+1}),t.list=b()(t.discountList),t.entime=t.rangeTime[1],this.$refs.form.validate(function(r){r?e.$route.query.id?a.$post("/admin/v1/content/update?type=Discount&id="+e.$route.query.id,t).then(function(e){0==e.retCode?a.$util.successAlert("Modify Success！","/Discount/list","return list"):a.$message({type:"warning",message:e.message})}):a.$post("/admin/v1/content?type=Discount",t).then(function(e){0==e.retCode?a.$util.successAlert("Add Success！","/Discount/list","return list"):a.$message({type:"warning",message:e.message})}):a.$message.error("请填写 the form correctly！")})}},created:function(){var e=this;this.creatEdit(),this.$route.query.id&&this.$get("/admin/v1/content?type=Discount&id="+this.$route.query.id,{}).then(function(t){0==t.retCode?(e.form=t.data,e.form.rangeTime=[t.data.starttime,t.data.endtime],e.form.discountList=e.form.list?JSON.parse(e.form.list):[{level:1,qty:"",discount:""}],e.$forceUpdate()):e.$message({message:t.msg,type:"warning"})})}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-card",{staticClass:"box-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/Discount/List"}}},[e._v("Discount")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.$route.query.id?"Edit":"Add"))])],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"align-center",staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"20%","label-position":"right"}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 name",maxlength:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"selltext",prop:"selltext"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 selltext",maxlength:""},model:{value:e.form.selltext,callback:function(t){e.$set(e.form,"selltext",t)},expression:"form.selltext"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"online",prop:"online"}},[a("el-radio-group",{model:{value:e.form.online,callback:function(t){e.$set(e.form,"online",t)},expression:"form.online"}},[a("el-radio",{attrs:{label:!0}},[e._v(e._s(!0))]),e._v(" "),a("el-radio",{attrs:{label:!1}},[e._v(e._s(!1))])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"rangeTime",prop:"rangeTime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH","value-format":"yyyy-MM-dd HH",type:"datetimerange","range-separator":"To","start-placeholder":"startTime","end-placeholder":"endTime"},model:{value:e.form.rangeTime,callback:function(t){e.$set(e.form,"rangeTime",t)},expression:"form.rangeTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"discount List",width:"700px"}},[a("el-table",{attrs:{data:e.form.discountList,width:"700px",rules:e.rules}},[a("el-table-column",{attrs:{"cell-style":"text-align:center","header-align":"center",label:"qty",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{"inline-message":!0,rules:e.tableRules.qty,prop:"discountList."+t.$index+".qty"}},[a("el-input",{attrs:{width:"200px"},model:{value:t.row.qty,callback:function(a){e.$set(t.row,"qty",a)},expression:"scope.row.qty"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"cell-style":"text-align:center","header-align":"center",label:"discount",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{"inline-message":!0,rules:e.tableRules.discount,prop:"discountList."+t.$index+".discount"}},[a("el-input",{attrs:{width:"200px"},model:{value:t.row.discount,callback:function(a){e.$set(t.row,"discount",a)},expression:"scope.row.discount"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"cell-style":"text-align:center","header-align":"center",label:"selltext",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{"inline-message":!0,prop:"discountList."+t.$index+".selltext"}},[a("el-input",{attrs:{width:"200px"},model:{value:t.row.selltext,callback:function(a){e.$set(t.row,"selltext",a)},expression:"scope.row.selltext"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"operation",width:"120px","cell-class-name":"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=e.form.discountList.length?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.$index)}}},[e._v("Delete")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleAdd(t.$index)}}},[e._v("Add")])]}}])})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"desc",prop:"desc"}},[a("div",{ref:"editorElem",staticStyle:{"z-index":"1000"}},[a("div",{staticStyle:{"text-align":"left"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})])]),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"return-btn"},[a("el-button",{staticClass:"button-purple",attrs:{type:"info"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("confirm")]),e._v(" "),a("el-button",{staticClass:"button-gray",attrs:{type:"info"},nativeOn:{click:function(t){return e.$util.goBack(t)}}},[e._v("cancel")])],1)],1)],1)])],1)},staticRenderFns:[]};var Y=a("VU/8")(F,P,!1,function(e){a("4lrl")},"data-v-48610422",null).exports,j={name:"Add",data:function(){return{data:{},extraData:{},shipping_info:{},payer_info:{},transaction_info:{},loading:!1}},methods:{dateFormat:function(e,t){(e=new Date(e)).setHours(e.getHours()-14);var a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t},getTransactionData:function(e){var t=this;this.$get("/payment/paypal/info/"+e,{}).then(function(e){t.loloading=!1,0==e.retCode?(t.shipping_info=e.data.shipping_info,t.payer_info=e.data.payer_info,t.transaction_info=e.data.transaction_info,t.data=e.data):t.$message({message:e.msg,type:"warning"})})}},created:function(){this.extraData=JSON.parse(localStorage.getItem("selectData")),"paypal"===this.extraData.vendor&&this.getTransactionData(this.$route.query.id)}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add",staticStyle:{width:"850px"}},[a("el-form",{ref:"form",staticStyle:{background:"#efefef",padding:"20px"}},[a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Orderid :"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s("paypal"===e.extraData.vendor?e.transaction_info.invoice_id:JSON.parse(e.extraData.notify_info).order_id))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"User :"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.extraData.user))])])],1)],1),e._v(" "),a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Comments :"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(JSON.parse(e.extraData.notify_info).request_info))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"contactInfo :"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(JSON.parse(e.extraData.notify_info).contact_info))])])],1)],1),e._v(" "),"paypal"===e.extraData.vendor?a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"First Name:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.payer_info.payer_name.given_name))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Last Name:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.payer_info.payer_name.surname))])])],1)],1):e._e(),e._v(" "),"paypal"===e.extraData.vendor?a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Business Name:"}},[a("div",{staticStyle:{"margin-right":"40px"}})])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Address Name:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.shipping_info.name))])])],1)],1):e._e(),e._v(" "),"paypal"===e.extraData.vendor?a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Address Street:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.shipping_info.address.line1))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Address City:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.shipping_info.address.city))])])],1)],1):e._e(),e._v(" "),"paypal"===e.extraData.vendor?a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Address postCode:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.shipping_info.address.postal_code))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Address Country:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.shipping_info.address.country_code))])])],1)],1):e._e()],1),e._v(" "),"paypal"===e.extraData.vendor?a("el-form",{ref:"form",staticStyle:{background:"#efefef",padding:"20px","margin-top":"20px"}},[a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"PayerId"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.transaction_info.paypal_account_id))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Payer Email:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.payer_info.email_address))])])],1)],1),e._v(" "),"paypal"===e.extraData.vendor?a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Payer Status:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s("Y"===e.payer_info.payer_status?"verified ":"unverified"))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Address Status:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s("Y"===e.payer_info.payer_status?"confirmed ":"unconfirmed"))])])],1)],1):e._e(),e._v(" "),"paypal"===e.extraData.vendor?a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Trans. ID:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.transaction_info.transaction_id))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Parent Trans. ID:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.transaction_info.transaction_subject))])])],1)],1):e._e()],1):e._e(),e._v(" "),"paypal"===e.extraData.vendor?a("el-form",{ref:"form",staticStyle:{background:"#efefef",padding:"20px","margin-top":"20px"}},[a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Payment Status:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.transaction_info.transaction_status))])])],1)],1),e._v(" "),a("el-row",{staticStyle:{height:"40px"}},[a("el-form-item",{attrs:{label:"Payment Date:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.dateFormat(e.transaction_info.transaction_updated_date,"yyyy-MM-dd HH:mm:ss")))])])],1)],1):e._e(),e._v(" "),a("el-form",{ref:"form",staticStyle:{background:"#efefef",padding:"20px","margin-top":"20px"}},[a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Currency:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s("paypal"===e.extraData.vendor?e.transaction_info.transaction_amount.currency_code:JSON.parse(e.extraData.notify_info).currency))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Gross Amount:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s("paypal"===e.extraData.vendor?e.transaction_info.transaction_amount.value:JSON.parse(e.extraData.notify_info).amount))])])],1)],1),e._v(" "),a("el-row",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Payment Fee:"}},[a("div",{staticStyle:{"margin-right":"40px"}},[e._v(e._s("paypal"===e.extraData.vendor?e.transaction_info.fee_amount.value:JSON.parse(e.extraData.notify_info).payment_fee))])])],1)],1),e._v(" "),a("el-row",[e.extraData.description?a("el-table",{attrs:{data:JSON.parse(e.extraData.description),width:"100%"}},[a("el-table-column",{attrs:{"header-align":"left",prop:"game",label:"game"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"category",label:"category"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"server",label:"server"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"product",label:"product"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"unit_price",label:"unit_price"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"quantity",width:"80",label:"quantity"}})],1):e._e()],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(j,B,!1,function(e){a("J7E6")},"data-v-93ebfa0a",null).exports,W={name:"List",data:function(){return{type:"name",keyword:"",tableData:[],selectid:null,pageNum:1,pageSize:10,total:0,formData:[],notSearch:!0}},methods:{checkSeleted:function(){return!!this.selectid||(this.$message({message:"请先选择用户!",type:"warning"}),!1)},getFromData:function(e){var t=this,a=e.id+"       ";return this.formData.map(function(r,i){if(t.dataSource.formData.data[r.name]&&"textarea"!=t.dataSource.formData.data[r.name].type&&"file"!=t.dataSource.formData.data[r.name].type){var n=e[r.name]?e[r.name]:"";a=a+n+"       "}}),this.formData.map(function(r,i){if(t.dataSource.formData.data[r.name]&&"file"==t.dataSource.formData.data[r.name].type){var n=e[r.name]?e[r.name]:"";a=a+n+"       "}}),a=a+e.updated+"       "},handleEdit:function(e){localStorage.setItem("keyword",this.keyword),this.$router.push("/template/Add/"+this.$route.params.key+"?id="+e.id)},selfSearch:function(){var e=this;if(!this.keyword)return this.pageNum=1,void this.queryTable();this.notSearch=!1,this.tableData=JSON.parse(b()(this.tableData1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),console.log(this.tableData),this.originTable=JSON.parse(b()(this.originTable1)).filter(function(t,a){return b()(t).indexOf(e.keyword)>-1}),this.$forceUpdate()},handleInputClear:function(e,t){var a=this;this.tableData.map(function(t,r){t.id==e&&a.originTable.map(function(t,i){t.id==e&&(a.tableData[r].price=a.originTable[i].price)})}),this.$forceUpdate()},handleInputConfirm:function(e,t){var a=this,r=this.originTable.filter(function(t){return t.id==e});r[0].price=t,a.$post("/admin/v1/content/update?type="+this.$route.params.key+"&id="+e,r[0]).then(function(e){0==e.retCode?(a.$message({type:"success",message:"Modify success"}),a.search()):a.$message({type:"warning",message:e.message})})},copy:function(e){var t=this,a=this.originTable.filter(function(t,a){return t.id==e}),r={};for(var i in this.dataSource.formData.data)r[i]="name"==i?a[0][i]+"(复制)":a.length>0&&a[0][i];t.$post("/admin/v1/content?type="+this.$route.params.key,r).then(function(e){0==e.retCode?(t.$message({type:"success",message:"Copy success"}),t.search()):t.$message({type:"warning",message:e.message})})},handleStatus:function(e){var t=this,a="";a="true"==e.online?"/admin/v1/content/reject":"/admin/v1/content/approve",this.$post(a+"?type="+this.$route.params.key+"&id="+e.id,{}).then(function(e){0==e.retCode?(t.$message({message:"操作成功!",type:"success"}),t.queryTable()):t.$message({message:e.msg,type:"warning"})})},handleDelete:function(e){var t=this;this.$delete("/admin/v1/content?type="+this.$route.params.key+"&id="+e.id,{}).then(function(e){0==e.retCode?(t.$message({message:"删除成功!",type:"success"}),t.queryTable()):t.$message({message:e.msg,type:"warning"})})},queryTable:function(){var e=this;this.$get("/admin/v1/contents?type="+this.$route.params.key+"&offset="+this.pageNum+"&count="+this.pageSize,{}).then(function(t){e.imgUrl=window.imgUrl,0==t.retCode?(e.notSearch=!0,e.tableData=t.data||[],e.originTable=JSON.parse(b()(e.tableData)),e.originTable1=JSON.parse(b()(e.tableData)),e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){for(var a in e.dataSource.formData.data){if("select"!=e.dataSource.formData.data[a].type&&"tree"!=e.dataSource.formData.data[a].type||(t[a]=t[a]&&t[a].split(",")[1]),"multiselect"==e.dataSource.formData.data[a].type){var r="";t[a]&&JSON.parse(t[a]).map(function(e,i){if(i==JSON.parse(t[a]).length-1)var n=e&&e.split(",")[1];else n=e&&e.split(",")[1]+",";r+=n}),t[a]=r}"bool"==e.dataSource.formData.data[a].type&&(t[a]=t[a]+"")}t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss")}),e.tableData1=JSON.parse(b()(e.tableData)),e.total=t.meta.total?parseInt(t.meta.total):0,e.keyword&&e.selfSearch()):e.$message({type:"warning",message:t.message})})},search:function(){var e=this;if(!this.keyword)return this.pageNum=1,void this.queryTable();this.notSearch=!1,this.$get("/admin/v1/contents/search?type="+this.$route.params.key+"&q="+this.keyword+"&status=public",{}).then(function(t){0==t.retCode?(e.tableData=t.data||[],e.originTable=JSON.parse(b()(e.tableData)),e.originTable1=JSON.parse(b()(e.tableData)),e.tableData.sort(function(e,t){return t.updated-e.updated}),e.tableData&&e.tableData.map(function(t){for(var a in e.dataSource.formData.data){if("multiselect"==e.dataSource.formData.data[a].type){var r="";t[a]&&JSON.parse(t[a]).map(function(e,i){if(i==JSON.parse(t[a]).length-1)var n=e&&e.split(",")[1];else n=e&&e.split(",")[1]+",";r+=n}),t[a]=r}"select"!=e.dataSource.formData.data[a].type&&"tree"!=e.dataSource.formData.data[a].type||(t[a]=t[a]&&t[a].split(",")[1]),"bool"==e.dataSource.formData.data[a].type&&(t[a]=t[a]+"")}t.updated=e.$util.formatTime(t.updated,"YYYY-MM-DD HH:mm:ss")}),e.tableData1=JSON.parse(b()(e.tableData)),e.total=t.meta.total?parseInt(t.meta.total):0):e.$message({type:"warning",message:t.message})})},handleCurrentChange:function(){this.queryTable()},handleSizeChange:function(e){this.pageSize=e,this.queryTable()}},created:function(){var e=this,t=JSON.parse(this.store.state.loginData);for(var a in t.map(function(t,a){t.name==e.$route.params.key&&(e.dataSource=t)}),this.dataSource.formData.data)this.formData[this.dataSource.formData.data[a].order-1]={name:a,data:this.dataSource.formData.data[a]};localStorage.getItem("keyword")&&(this.keyword=localStorage.getItem("keyword"),localStorage.setItem("keyword","")),this.queryTable()},mounted:function(){},actived:function(){this.resetDatas()}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("el-card",{staticClass:"box-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticStyle:{"line-height":"33px"}},[e._v(e._s(e.$route.params.key)+"/List")])],1),e._v(" "),a("el-button",{staticClass:"common-btn",attrs:{type:"primary"},nativeOn:{click:function(t){return e.$router.push("/template/Add/"+e.$route.params.key)}}},[e._v("Add")]),e._v(" "),a("el-button",{staticClass:"common-btn",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.search}},[e._v("Search")]),e._v(" "),a("el-input",{staticClass:"search-input",staticStyle:{width:"340px!important","margin-right":"50px",float:"right"},attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},on:{input:e.selfSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("el-table",{attrs:{data:e.tableData,width:"100%"}},[a("el-table-column",{attrs:{"header-align":"left",prop:"id",label:"id",width:"60px"}}),e._v(" "),e._l(e.formData,function(t,r){return t&&"price"==t.name?a("el-table-column",{key:t.id,attrs:{prop:t&&t.name,label:t&&t.name,width:"120px"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-input",{staticStyle:{width:"110px"},attrs:{placeholder:"请输入"+t.name},on:{blur:function(t){return e.handleInputClear(r.row.id,r.row.price)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(r.row.id,r.row.price)}},model:{value:r.row.price,callback:function(t){e.$set(r.row,"price",t)},expression:"scope.row.price"}})]}}],null,!0)}):e._e()}),e._v(" "),e._l(e.formData,function(t,r){return t&&"textarea"!=t.data.type&&"file"!=t.data.type&&"price"!=t.name?a("el-table-column",{key:t&&t.id,attrs:{sortable:t&&"name"==t.name,"header-align":"left",prop:t&&t.name,label:t&&t.name,width:"type"==t.name||"miniNumber"==t.name||"hotItem"==t.name||"online"==t.name?"110px":"140px"}}):e._e()}),e._v(" "),e._l(e.formData,function(t,r){return t&&"file"==t.data.type?a("el-table-column",{key:t.id,attrs:{"cell-style":"text-align:center","header-align":"center",prop:t&&t.name,label:t&&t.name,width:"120px"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row[t&&t.name]?a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.imgUrl+r.row[t&&t.name]}}):e._e()]}}],null,!0)}):e._e()}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",sortable:"",label:"updateTime",width:"160px","cell-class-name":"center","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"operation","min-width":"240px","cell-class-name":"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("Delete")]),e._v(" "),a("el-button",{staticClass:"clip",attrs:{type:"text",size:"small","data-clipboard-text":e.getFromData(t.row)},on:{click:function(a){return e.copy(t.row.id)}}},[e._v("Copy")])]}}])})],2),e._v(" "),e.notSearch?a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1)],1)},staticRenderFns:[]};var K=a("VU/8")(W,G,!1,function(e){a("kdHD")},null,null).exports,Q={name:"Add",data:function(){return{formData:[],treeData:[],picSource:[],editor:null,picType:{},editorContent:"",form:{},categoryUrl:"",activeKey:"",roles:[],defaultProps:{label:"name"},imgUrl:"",rules:{}}},methods:{handleAvatarSuccess:function(e,t){this.formData.imageUrl=URL.createObjectURL(t.raw)},refreshData:function(e){this.$forceUpdate()},judgeGame:function(e){"category"==e&&0==this.dataSource.formData.data[e].source.length&&this.$message({type:"warning",message:"Place Select Game"})},changeSelect:function(){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},uploadImg:function(e){var t=this,a=new FormData;a.append("file",e.file),this.$post("/admin/v1/file",a).then(function(e){t.form[t.activeKey]=e.data.file.split(",")[0],t.$forceUpdate()})},beforeAvatarUpload:function(e){},getRoles:function(){var e=this;this.$post("/role/index",{per_page:1e4}).then(function(t){e.roles=t.data.data})},handleNodeClick:function(e){this.form.belongto=e.id,this.$forceUpdate()},getPicData:function(){var e=this;this.$get("/admin/v1/files?count=-1",{}).then(function(t){0==t.retCode?e.picSource=t.data:e.$message({type:"warning",message:t.message})})},submit:function(){var e=this,t={};t=JSON.parse(b()(this.form));var a=this;for(var r in t)if("id"!=r&&this.dataSource.formData.data[r]&&this.form[r]){if("select"==this.dataSource.formData.data[r].type||"tree"==this.dataSource.formData.data[r].type){if("belongto"==r)var i=this.treeData;else i=this.dataSource.formData.data[r].source;if(this.form[r].toString().indexOf(",")>-1)return;var n=i.filter(function(t,a){return t.id==e.form[r]});t[r]=this.form[r]+","+n[0].name}if("multiselect"==this.dataSource.formData.data[r].type){i=this.dataSource.formData.data[r].source;var s=[];this.form[r].map(function(e){var t=i.filter(function(t,a){return t.id==e});s.push(e+","+t[0].name)}),t[r]=b()(s)}}this.$refs.form.validate(function(r){if(r)if(e.$route.query.id){for(var i in t)""===t[i]&&(t[i]="--remove--");a.$post("/admin/v1/content/update?type="+e.$route.params.key+"&id="+e.$route.query.id,t).then(function(t){0==t.retCode?a.$util.successAlert("Modify Success！","/template/list/"+e.$route.params.key,"return list"):a.$message({type:"warning",message:t.message})})}else a.$post("/admin/v1/content?type="+e.$route.params.key,t).then(function(t){0==t.retCode?a.$util.successAlert("Add Success！","/template/list/"+e.$route.params.key,"return list"):a.$message({type:"warning",message:t.message})});else a.$message.error("请填写 the form correctly！")})},getTreeList:function(e,t){var a=this;e&&e.map(function(e,t){e.id&&(e.children=a.treeData.filter(function(t,a){return parseInt(t.belongto&&t.belongto.split(",")[0])==e.id}),a.getTreeList(e.children))})},getTreeSource:function(e){var t=this,a=this;if(this.form.game){var r=this.dataSource.formData.data.game.source;if(r[0].name){var i=r.filter(function(e,a){return e.id==t.form.game})[0].name;this.$get("/admin/v1/contents/search?type=Category&q="+i,{}).then(function(r){if(0==r.retCode){r.data&&r.data.map(function(e){e.name=e.name+"-"+e.sname,e.id=e.id+""}),t.treeData=r.data||[];var i=t.treeData&&t.treeData.filter(function(e,t){return!e.belongto});i.unshift({name:"none",id:""}),t.getTreeList(i),t.dataSource.formData.data[e]=t.dataSource.formData.data[e]||{},t.dataSource.formData.data[e].source=i||[],console.log(t.dataSource.formData.data[e].source),t.$forceUpdate()}else a.$message({type:"warning",message:r.message})})}}},getServeData:function(e,t){var a=this;if("items"==e||"coins"==e){var r=e.split("s")[0];t="/admin/v1/contents/search?type=Product&filter=type:"+r+","+r+"&count=-1&q="}if(this.form.game){var i=this.dataSource.formData.data.game.source;if(i[0].name){var n=i.filter(function(e,t){return e.id==a.form.game})[0].name;this.$get(t+n,{}).then(function(t){0==t.retCode?(t.data&&t.data.map(function(e){e.name=e.name+"-"+e.sname,e.id=e.id+""}),a.dataSource.formData.data[e].source=t.data||[],a.$forceUpdate()):that.$message({type:"warning",message:t.message})})}}},getDataSource:function(e,t){var a=this;if(t)var r=this;r.$get(e,{}).then(function(e){0==e.retCode?(e.data.map(function(e){e.id=e.id+""}),a.dataSource.formData.data[t].source=e.data||[],a.dataSource.formData.data[t].required&&0==a.dataSource.formData.data[t].source.length&&a.$alert("请先创建"+t,"提示",{confirmButtonText:"确定",callback:function(e){a.$router.push("/template/Add/"+t.charAt(0).toUpperCase()+t.slice(1))}}),a.$route.query.id&&setTimeout(function(){for(var e in r.dataSource.formData.data)r.dataSource.formData.data[e].isFilter&&r.getServeData(e,r.dataSource.formData.data[e].ajaxUrl)},500),a.$forceUpdate()):r.$message({type:"warning",message:e.message})})},creatEdit:function(e){var t=this,a=this;setTimeout(function(){t["editor"+e]=new $.a(t.$refs["editorElem"+e]),t["editor"+e].customConfig.onchange=function(t){a.form[e]=t},t["editor"+e].create(),console.log(t["editor"+e]),t["editor"+e].txt.html(a.form[e])},1e3)}},mounted:function(){var e=this;this.imgUrl=window.imgUrl;var t=JSON.parse(this.store.state.loginData);for(var a in t.map(function(t,a){t.name==e.$route.params.key&&(e.dataSource=t)}),this.dataSource.formData.data){if(this.dataSource.formData.data[a].required){var r="select"==this.dataSource.formData.data[a].type||"multiselect"==this.dataSource.formData.data[a].type?"select":"fill in";this.rules[a]=[{message:"Place "+r+a,required:!0,trigger:"blur"}]}this.formData[this.dataSource.formData.data[a].order-1]={name:a,data:this.dataSource.formData.data[a]},"textarea"==this.dataSource.formData.data[a].type&&this.creatEdit(a),"file"==this.dataSource.formData.data[a].type&&(this.picType[a]="1"),"bool"==this.dataSource.formData.data[a].type&&(this.form[a]?this.form[a]=!0:this.form[a]=!1),"select"!=this.dataSource.formData.data[a].type&&"multiselect"!=this.dataSource.formData.data[a].type||(this.dataSource.formData.data[a].source.length>0&&this.dataSource.formData.data[a].source[0].indexOf("/")>-1?this.dataSource.formData.data[a].source[0].indexOf("q=[[game]]")>-1?(this.dataSource.formData.data[a].isFilter=!0,this.dataSource.formData.data[a].ajaxUrl=this.dataSource.formData.data[a].source[0].split("[[game]]")[0],this.categoryUrl=this.dataSource.formData.data[a].source[0].split("[[")[0]):this.getDataSource(this.dataSource.formData.data[a].source[0],a):this.dataSource.formData.data[a].source.map(function(t,r){e.dataSource.formData.data[a].source[r]={id:t,value:t,name:t}})),"tree"==this.dataSource.formData.data[a].type&&this.getTreeSource(a)}this.$forceUpdate()},created:function(){var e=this;this.$route.query.id?this.$get("/admin/v1/content?type="+this.$route.params.key+"&id="+this.$route.query.id,{}).then(function(t){if(0==t.retCode)for(var a in e.form=t.data,e.getPicData(),e.dataSource.formData.data){if("select"==e.dataSource.formData.data[a].type&&e.form[a]&&(e.form[a]=e.form[a]&&e.form[a].split(",")[0]),"multiselect"==e.dataSource.formData.data[a].type&&e.form[a]){var r=[];e.form[a]&&JSON.parse(e.form[a]).map(function(e,t){r.push(e&&e.split(",")[0])}),e.form[a]=r}"tree"==e.dataSource.formData.data[a].type&&(e.form[a]=e.form[a]&&parseInt(e.form[a].split(",")[0]),e.$forceUpdate(),e.$refs.tree[0].setCurrentKey(e.form[a])),"file"==e.dataSource.formData.data[a].type&&e.form[a]&&(e.form[a]=parseInt(e.form[a])),e.$forceUpdate()}else e.$message({message:t.msg,type:"warning"})}):this.getPicData()},watch:{"form.game":{handler:function(e,t){if(t&&e!=t)for(var a in this.dataSource.formData.data)this.dataSource.formData.data[a].isFilter&&("select"==this.dataSource.formData.data[a].type?this.form[a]="":this.form[a]=[],this.getServeData(a,this.dataSource.formData.data[a].ajaxUrl))},deep:!0}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-card",{staticClass:"box-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/template/list/"+this.$route.params.key}}},[e._v(e._s(e.$route.params.key))]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.$route.query.id?"Edit":"Add"))])],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"align-center",staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"20%","label-position":"right"}},[e._l(e.formData,function(t,r){return t?a("el-form-item",{key:r,attrs:{label:t&&t.name+"",prop:t&&t.name}},["input"==t.data.type&&"stock"!=t.name?a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 "+t.name,maxlength:""},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}}):e._e(),e._v(" "),"input"==t.data.type&&"stock"==t.name?a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请填写 "+t.name,max:"999999",maxlength:"6"},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}}):e._e(),e._v(" "),"tree"==t.data.type?a("el-tree",{key:t.data.id,ref:"tree",refInFor:!0,staticStyle:{width:"800px"},attrs:{"default-expand-all":!0,props:e.defaultProps,data:t.data.source[0].name?t.data.source:[],"highlight-current":!0,"node-key":"id",label:t.name,value:t.id,accordion:""},on:{"node-click":e.handleNodeClick}}):e._e(),e._v(" "),"multiselect"==t.data.type?a("el-select",{staticStyle:{width:"800px"},attrs:{clearable:!0,multiple:"",placeholder:"请选择"+t.name},on:{change:function(t){return e.refreshData(e.subItem.name)}},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}},e._l(t.data.source,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),"select"==t.data.type?a("el-select",{staticStyle:{width:"800px"},attrs:{clearable:!0,placeholder:"请选择"+t.name},on:{click:function(t){return e.judgeGame(e.subItem.name)},change:e.refreshData},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}},e._l(t.data.source,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),"bool"==t.data.type?a("el-radio-group",{on:{change:e.refreshData},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}},[a("el-radio",{attrs:{label:!t.data.source[0]||t.data.source[0]}},[e._v(e._s(!t.data.source[0]||t.data.source[0]))]),e._v(" "),a("el-radio",{attrs:{label:!!t.data.source[1]&&t.data.source[1]}},[e._v(e._s(!!t.data.source[1]&&t.data.source[1]))])],1):e._e(),e._v(" "),"file"==t.data.type?a("el-radio-group",{on:{change:e.refreshData},model:{value:e.picType[t.name],callback:function(a){e.$set(e.picType,t.name,a)},expression:"picType[item.name]"}},[a("el-radio",{attrs:{value:"1",label:"1"}},[e._v("Select from Gallery")]),e._v(" "),a("el-radio",{attrs:{value:"2",label:"2"}},[e._v("Upload")])],1):e._e(),e._v(" "),"file"==t.data.type?a("div",{staticStyle:{display:"inline-block"},on:{click:function(a){e.activeKey=t.name}}},["file"==t.data.type&&1==e.picType[t.name]?a("el-select",{staticStyle:{display:"inline-block",width:"800px",margin:"20px 0"},attrs:{filterable:"",clearable:"",placeholder:"请选择"+t.name},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}},e._l(e.picSource,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),e.form[t.name]&&1==e.picType[t.name]?a("div",{staticStyle:{position:"relative"}},[a("img",{staticClass:"avatar",attrs:{src:e.imgUrl+e.form[t.name]}}),e._v(" "),a("span",{staticClass:"el-upload-list__item-delete",staticStyle:{position:"absolute",left:"130px",top:"-14px",display:"block"},on:{click:function(a){e.form[t.name]=""}}},[a("i",{staticClass:"el-icon-delete"})])]):e._e(),e._v(" "),"file"==t.data.type&&2==e.picType[t.name]?a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.uploadImg,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form[t.name]?a("img",{staticClass:"avatar",attrs:{src:e.imgUrl+e.form[t.name]}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e._e()],1):e._e(),e._v(" "),"textarea"==t.data.type?a("div",{ref:"editorElem"+t.name,refInFor:!0,staticStyle:{"z-index":"1000"}},[a("div",{staticStyle:{"text-align":"left"},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})]):e._e(),e._v(" "),e.dataSource.formData.data[t.name].helpText?a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"hover",content:e.dataSource.formData.data[t.name].helpText}},[a("i",{staticClass:"iconfont icon-tishi1",staticStyle:{color:"#666","margin-left":"10px"},attrs:{slot:"reference"},slot:"reference"})]):e._e()],1):e._e()}),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"cls"}),e._v(" "),a("div",{staticClass:"return-btn"},[a("el-button",{staticClass:"button-purple",attrs:{type:"info"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("confirm")]),e._v(" "),a("el-button",{staticClass:"button-gray",attrs:{type:"info"},nativeOn:{click:function(t){return e.$util.goBack(t)}}},[e._v("cancel")])],1)],2)],1)]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.editorContent)}})],1)},staticRenderFns:[]};var Z=a("VU/8")(Q,X,!1,function(e){a("tDEw")},"data-v-f4c14ba0",null).exports,ee={data:function(){return{dialogImageUrl:"",picSource:[],dialogVisible:!1,disabled:!1,keyword:""}},methods:{handleRemove:function(e){var t=this;this.$delete("/admin/v1/file?id="+e,{}).then(function(e){t.getPicData()})},search:function(){var e=this;this.keyword?this.$get("/admin/v1/files/search?q="+this.keyword,{}).then(function(t){0==t.retCode?e.picSource=t.data:e.$message({type:"warning",message:t.message})}):this.getPicData()},handlePictureCardPreview:function(e){this.dialogImageUrl=e,this.dialogVisible=!0},getWidth:function(e){var t=this,a=new Image;a.src=this.imgUrl+e.id,a.onload=function(){e.height=a.height,e.width=a.width,t.$forceUpdate()}},getPicData:function(){var e=this;this.$get("/admin/v1/files?count=-1",{}).then(function(t){0==t.retCode?(e.picSource=t.data,e.picSource.map(function(t){e.getWidth(t)})):e.$message({type:"warning",message:t.message})})},uploadImg:function(e){var t=this;console.log(e.file);var a=new FormData;a.append("file",e.file),this.$post("/admin/v1/file",a).then(function(e){t.getPicData()})}},created:function(){this.imgUrl=window.imgUrl,this.getPicData()}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{staticClass:"search-input",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索内容"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{staticClass:"common-btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("Search")])],1),e._v(" "),a("div",{staticClass:"el-upload-list el-upload-list--picture-card\n\t",staticStyle:{"text-align":"left"}},e._l(e.picSource,function(t,r){return a("div",{key:t.id,staticStyle:{position:"relative",display:"inline-block"},attrs:{onload:"getWidth(item)"}},[a("div",{staticClass:"el-upload-list__item is-ready"},[a("div",[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.imgUrl+t.id,alt:""}}),e._v(" "),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(a){return e.handlePictureCardPreview(e.imgUrl+t.id)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(a){return e.handleRemove(t.id)}}},[a("i",{staticClass:"el-icon-delete"})])])])]),e._v(" "),a("div",{staticClass:"hidden-style",staticStyle:{width:"148px","text-align":"center",margin:"0 0 10px"}},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"hidden-style",staticStyle:{width:"148px","text-align":"center",margin:"0 0 10px"}},[e._v("("+e._s(t.width)+"*"+e._s(t.height)+")")])])}),0),e._v(" "),a("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:"#","show-file-list":!1,"http-request":e.uploadImg}},[a("div",{staticClass:"el-upload--picture-card"},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var ae=a("VU/8")(ee,te,!1,function(e){a("qGyT")},null,null).exports,re={name:"Add",data:function(){return{formData:[],treeData:[],picSource:[],editor:null,picType:{},editorContent:"",form:{cache_disabled:!1,cors_disabled:!1,zip_disabled:!0}}},methods:{handleAvatarSuccess:function(e,t){this.formData.imageUrl=URL.createObjectURL(t.raw)},refreshData:function(){this.$forceUpdate()},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},uploadImg1:function(e){var t=this,a=new FormData;a.append("file",e.file),this.$post("/admin/v1/file",a).then(function(e){t.form.logo=e.data.file.split(",")[0]})},beforeAvatarUpload:function(e){},getPicData:function(){var e=this;this.$get("/admin/v1/files?count=-1",{}).then(function(t){0==t.retCode?e.picSource=t.data:e.$message({type:"warning",message:t.message})})},submit:function(){var e=this;this.$refs.form.validate(function(t){t?e.$post("/admin/v1/config",e.form).then(function(t){0==t.retCode?e.$util.successAlert("修改成功！","/config"):e.$message({type:"warning",message:t.message})}):e.$message.error("请正确填写表单！")})}},mounted:function(){this.imgUrl=window.imgUrl},created:function(){this.getPicData(),this.form=JSON.parse(this.store.state.configData),this.form.cache_disabled=this.form.cache_disabled+"",this.form.cors_disabled=this.form.cors_disabled+"",this.form.zip_disabled=this.form.zip_disabled+""}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"align-center",staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"20%","label-position":"right"}},[a("el-form-item",{attrs:{label:"admin_email",prop:"admin_email"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"admin_email"},model:{value:e.form.admin_email,callback:function(t){e.$set(e.form,"admin_email",t)},expression:"form.admin_email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"bind_addr",prop:"bind_addr"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{disabled:"",placeholder:"bind_addr"},model:{value:e.form.bind_addr,callback:function(t){e.$set(e.form,"bind_addr",t)},expression:"form.bind_addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"cache_disabled",prop:"cache_disabled"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.cache_disabled,callback:function(t){e.$set(e.form,"cache_disabled",t)},expression:"form.cache_disabled"}},[a("el-radio",{attrs:{label:"true"}},[e._v("true")]),e._v(" "),a("el-radio",{attrs:{label:"false"}},[e._v("false")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"cors_disabled",prop:"cors_disabled"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.cors_disabled,callback:function(t){e.$set(e.form,"cors_disabled",t)},expression:"form.cors_disabled"}},[a("el-radio",{attrs:{label:"true"}},[e._v("true")]),e._v(" "),a("el-radio",{attrs:{label:"false"}},[e._v("false")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"domain",prop:"domain"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"domain"},model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain",t)},expression:"form.domain"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"email_host",prop:"email_host"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"email_host"},model:{value:e.form.email_host,callback:function(t){e.$set(e.form,"email_host",t)},expression:"form.email_host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"email_password",prop:"email_password"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"email_password"},model:{value:e.form.email_password,callback:function(t){e.$set(e.form,"email_password",t)},expression:"form.email_password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"http_port",prop:"http_port"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{disabled:"",placeholder:"http_port"},model:{value:e.form.http_port,callback:function(t){e.$set(e.form,"http_port",t)},expression:"form.http_port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"https_port",prop:"https_port"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{disabled:"",placeholder:"https_port"},model:{value:e.form.https_port,callback:function(t){e.$set(e.form,"https_port",t)},expression:"form.https_port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"log_file",prop:"log_file"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{disabled:"",placeholder:"log_file"},model:{value:e.form.log_file,callback:function(t){e.$set(e.form,"log_file",t)},expression:"form.log_file"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"log_level",prop:"log_level"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{disabled:"",placeholder:"log_level"},model:{value:e.form.log_level,callback:function(t){e.$set(e.form,"log_level",t)},expression:"form.log_level"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{disabled:"",placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"zip_disabled",prop:"zip_disabled"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.zip_disabled,callback:function(t){e.$set(e.form,"zip_disabled",t)},expression:"form.zip_disabled"}},[a("el-radio",{attrs:{label:"true"}},[e._v("true")]),e._v(" "),a("el-radio",{attrs:{label:"false"}},[e._v("false")])],1)],1),e._v(" "),a("div",{staticClass:"return-btn"},[a("el-button",{staticClass:"button-purple",attrs:{type:"info"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticClass:"button-gray",attrs:{type:"info"},nativeOn:{click:function(t){return e.$util.goBack(t)}}},[e._v("取 消")])],1)],1)],1)]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.editorContent)}})],1)},staticRenderFns:[]};var ne=a("VU/8")(re,ie,!1,function(e){a("year")},null,null).exports;r.default.use(i.a);var se=[{path:"/",name:"login",component:function(e){return new Promise(function(e){e()}).then(function(){var t=[a("xJsL")];e.apply(null,t)}.bind(this)).catch(a.oe)}},{path:"/template",name:"Template",component:h,children:[{path:"List/:key",name:"列表",component:K},{path:"Add/:key",name:"新增",component:Z}],meta:{requireAuth:!0}},{path:"/User",name:"User",component:h,children:[{path:"List",name:"用户列表",component:_},{path:"Add",name:"新增用户",component:U},{path:"Modify",name:"新增用户",component:z}],meta:{requireAuth:!0}},{path:"/Photo",name:"Photo",component:h,children:[{path:"List",name:"Photo",component:ae}],meta:{requireAuth:!0}},{path:"/Config",name:"Config",component:h,children:[{path:"/",name:"Config",component:ne}],meta:{requireAuth:!0}},{path:"/Order",name:"Order",component:h,children:[{path:"List",name:"订单列表",component:E}],meta:{requireAuth:!0}},{path:"/Order/Add",name:"Order",component:V,meta:{requireAuth:!0}},{path:"/Coupon",name:"Coupon",component:h,children:[{path:"List",name:"优惠券列表",component:x},{path:"Add",name:"优惠券新增",component:A}],meta:{requireAuth:!0}},{path:"/Discount",name:"Discount",component:h,children:[{path:"List",name:"折扣列表",component:J},{path:"Add",name:"折扣新增",component:Y}],meta:{requireAuth:!0}}];window.localStorage.getItem("userName")&&f.commit(u.c,window.localStorage.getItem("loginData")),window.localStorage.getItem("configData")&&f.commit(u.a,window.localStorage.getItem("configData")),window.localStorage.getItem("loginData")&&f.commit(u.c,window.localStorage.getItem("loginData"));var oe=new i.a({routes:se});oe.beforeEach(function(e,t,a){a()});var le=oe,ce=a("mtWM"),de=a.n(ce),ue=de.a.create({baseURL:f.state.isUrl}),fe=(a("RFxO"),a("+eot"),a("zL8q")),me=a.n(fe),pe=(a("tvR6"),{successAlert:function(e,t,a){me.a.MessageBox.alert('<div class="confirmWindow"><img src="./static/success.png"/><div class="confirmText">'+e+'</div><div class="cls"></div><div class="cls"></div></div>',{confirmButtonText:a,confirmButtonClass:"button-purple btn-width",type:"",dangerouslyUseHTMLString:!0,center:!0}).then(function(){le.push({path:t})})},goBack:function(){window.history.go(-1)},downloadFile:function(e,t){var a=document.createElement("a");a.setAttribute("download",e),a.setAttribute("href",t),a.setAttribute("target","_blank"),a.click()},getLatestWeek:function(){var e=new Date;return[new Date(e.getTime()-6048e5),e]},getLatestMonth:function(){var e=new Date;return[new Date(e.getTime()-2592e6),e]},getTime:function(e){return e?Math.floor((e.getTime()-60*e.getTimezoneOffset()*1e3)/1e3):null},getTimeOfStr:function(e){return e?Math.floor((Date.parse(e)-60*date.getTimezoneOffset()*1e3)/1e3):null},formatDate:function(e,t){function a(e){return("00"+e).substr(e.length)}t||(t="yyyy-MM-dd"),/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in r)if(new RegExp("("+i+")").test(t)){var n=r[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?n:a(n))}return t},formatTime:function(e,t){var a=new Date(e),r=function(e){return(e<10?"0":"")+e};(new Date).getTimezoneOffset();return t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(e){switch(e){case"YYYY":return r(a.getFullYear());case"MM":return r(a.getMonth()+1);case"mm":return r(a.getMinutes());case"DD":return r(a.getDate());case"HH":return r(a.getHours());case"ss":return r(a.getSeconds())}})},inArrayObject:function(e,t,a){if(!e||!t||!a)return-1;for(var r=0;r<e.length;r++)if(e[r][a]==t)return r;return-1},checkDates:function(e){return e&&0!=e.length&&e[0]&&e[1]?e[0]<new Date(2018,0,1)?(me.a.Message.error("开始时间不能早于2018-01-01！"),!1):e[0]>e[1]?(me.a.Message.error("开始时间不能早于结束时间！"),!1):e[1]>new Date(e[0].getTime()+31536e6)?(me.a.Message.error("结束时间不能晚于开始时间一年以后！"),!1):!(e[1]>new Date)||(me.a.Message.error("结束时间不能晚于当前时间！"),!1):(me.a.Message.error("请选择时间！"),!1)}}),he=a("pFYg"),ge=a.n(he),be=a("//Fk"),ve=a.n(be);a("OAwv"),a("VI/i");r.default.use(me.a),window.imgUrl="https://support.bk.cloudns.cc:8081/admin/v1/file?id=";var ye="https://support.bk.cloudns.cc:8081",_e=void 0,Se=0;de.a.interceptors.request.use(function(e){return e.headers.lqcms_token=localStorage.token,e.url.indexOf(!1)&&(Se++,_e=r.default.prototype.$loading({lock:!0,text:"",spinner:"el-icon-loading",background:"rgba(0, 0, 0,0)"})),e},function(e){return ve.a.reject(e)}),de.a.interceptors.response.use(function(e){return--Se<=0&&_e.close(),e.data&&"object"==ge()(e.data)&&-1===e.data.retCode?(errorMessaage(e.data.msg||e.data.message,!0),ve.a.reject(e)):e.data},function(e){return--Se<=0&&_e.close(),e.response&&r.default.prototype.$message({message:"网络错误!",type:"error"}),ve.a.reject(e)});var we=function(e,t){return new ve.a(function(a,r){de.a.get(ye+e,t).then(function(e){a(e)})})},xe=function(e,t){return new ve.a(function(a,r){de.a.post(ye+e,t).then(function(e){a(e)})})},ke=function(e,t){return new ve.a(function(a,r){de.a.delete(ye+e,{data:t}).then(function(e){a(e)})})},De=a("TQvf"),$e=a.n(De);r.default.use(d.a),r.default.use(i.a),r.default.use(me.a),r.default.prototype.clipboard=$e.a,r.default.prototype.$util=pe,r.default.prototype.$get=we,r.default.prototype.$post=xe,r.default.prototype.$delete=ke,r.default.prototype.store=f,r.default.config.productionTip=!1,new r.default({el:"#app",axios:ue,router:le,store:f,components:{App:o},template:"<App/>"})},QDfD:function(e,t){e.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},RFxO:function(e,t){},Ur4z:function(e,t){},UyIq:function(e,t){},ejIc:function(e,t){e.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},iMgA:function(e,t){},kdHD:function(e,t){},qGyT:function(e,t){},tDEw:function(e,t){},tvR6:function(e,t){},vLcX:function(e,t){},xJsL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),i=a.n(r),n=a("5reh"),s=(a("mtWM"),{created:function(){this.doKeyCode(),this.menuTrees=this.store.state.loginData&&JSON.parse(this.store.state.loginData),localStorage.token&&this.$router.push("/template/List/"+this.menuTrees[0].name)},data:function(){return{reload:!1,isLoading:!1,checked:!0,isShowTip:!1,login:{userName:"",userPwd:""},rules:{userName:[{validator:function(e,t,a){""===t?a(new Error("请输入用户名")):a()},trigger:"blur"}],userPwd:[{validator:function(e,t,a){""===t?a(new Error("请输入密码")):a()},trigger:"blur"}]}}},methods:{create:function(){localStorage.removeItem("token"),localStorage.removeItem("loginData"),localStorage.removeItem("configData"),document.cookie="",state.token=null},doLogin:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.$post("/admin/v1/login",{email:a.login.userName,password:a.login.userPwd}).then(function(e){if(0==e.retCode){for(var r in localStorage.setItem("token",e.data),t.loginData=JSON.parse(e.contents),t.menuTrees=[],t.loginData)t.menuTrees.push({name:r,formData:t.loginData[r]});t.menuTrees.sort(function(e,t){return e.formData.no-t.formData.no}),a.$store.commit(n.c,i()(t.menuTrees)),a.$message({type:"success",message:"登录成功!"}),a.$get("/admin/v1/config",{}).then(function(r){r.data[0].data.email=a.login.userName,0==r.retCode?(a.$store.commit(n.a,i()(r.data[0].data)),a.$router.push("/template/List/"+t.menuTrees[0].name)):a.$message({type:"warning",message:e.message})})}else a.$message({type:"warning",message:e.message})})})},doKeyCode:function(){var e=this;document.addEventListener("keydown",function(t){13==t.keyCode&&e.doLogin("login")})}}}),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"login-main"},[a("div",{staticClass:"form-main"},[a("div",{staticClass:"title"},[e._v("管理中心")]),e._v(" "),a("el-form",{ref:"login",attrs:{model:e.login,rules:e.rules,"status-icon":"","label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"账号",prop:"userName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入账号","auto-complete":"off"},model:{value:e.login.userName,callback:function(t){e.$set(e.login,"userName",t)},expression:"login.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"userPwd"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码","auto-complete":"off"},model:{value:e.login.userPwd,callback:function(t){e.$set(e.login,"userPwd",t)},expression:"login.userPwd"}})],1),e._v(" "),a("el-button",{staticClass:"login-btn",attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.doLogin("login")}}},[e._v("登 录")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTip,expression:"isShowTip"}],staticStyle:{color:"red","margin-top":"20px"}},[e._v("错误5次以上，账号锁定，24小时自动解锁。")])],1)])])},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(e){a("UyIq")},null,null);t.default=l.exports},year:function(e,t){},zYIo:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.87b224b4d9e83caf8776.js.map